{"version":3,"sources":["meteor://ðŸ’»app/client/templates/auth-join.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/templates/auth-join.js","sourcesContent":["var ERRORS_KEY = 'joinErrors';\n\nTemplate.join.onCreated(function() {\n  Session.set(ERRORS_KEY, {});\n});\n\nTemplate.join.helpers({\n  errorMessages: function() {\n    return _.values(Session.get(ERRORS_KEY));\n  },\n  errorClass: function(key) {\n    return Session.get(ERRORS_KEY)[key] && 'error';\n  }\n});\n\nTemplate.join.events({\n  'submit': function(event, template) {\n    event.preventDefault();\n    var email = template.$('[name=email]').val();\n    var password = template.$('[name=password]').val();\n    var confirm = template.$('[name=confirm]').val();\n\n    var errors = {};\n\n    if (! email) {\n      errors.email = 'Email required';\n    }\n\n    if (! password) {\n      errors.password = 'Password required';\n    }\n\n    if (confirm !== password) {\n      errors.confirm = 'Please confirm your password';\n    }\n\n    Session.set(ERRORS_KEY, errors);\n    if (_.keys(errors).length) {\n      return;\n    }\n\n    Accounts.createUser({\n      email: email,\n      password: password\n    }, function(error) {\n      if (error) {\n        return Session.set(ERRORS_KEY, {'none': error.reason});\n      }\n\n      Router.go('home');\n    });\n  }\n});\n"]}